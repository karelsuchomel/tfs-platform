function RPcreateCategories(e,t){var n={status:-1,exception:"",id:""},s=e;RPsendRequest("GET","categories",e="?search="+encodeURIComponent(e),function(e){"[]"!==JSON.stringify(e)?e[0].name===s&&(console.log("this category already exists: "+e[0].name),n.status=0,n.id=e[0].id,t(n)):"[]"===JSON.stringify(e)?RPsendRequest("POST","categories",{name:s},function(e){"[]"!==JSON.stringify(e)?e.name===s&&(console.log("created new category: "+e.name),n.status=1,n.id=e.id,t(n)):(n.exception=e,t(n))}):(n.exception=e,t(n))})}function RPcreatePost(t,n){var s={status:-1,exception:"",id:""},o=t.Title;postTitle="?search="+encodeURIComponent(t.Title),RPsendRequest("GET","posts",postTitle,function(e){"[]"!==JSON.stringify(e)?e[0].title.rendered===o&&(console.log("this post already exists: "+o),s.status=0,s.id=e[0].id,n(s)):"[]"===JSON.stringify(e)?function(){if(""!==t.ThumbnailID)var e={date:t.Date,status:"publish",title:t.Title,content:t.Content,categories:t.CategoryIDs,featured_media:t.ThumbnailID};else var e={date:t.Date,status:"publish",title:t.Title,content:t.Content,categories:t.CategoryIDs};RPsendRequest("POST","posts",e,function(e){"[]"!==JSON.stringify(e)?e.title.rendered===o&&(console.log("created new post: "+o),s.status=1,s.id=e.id,n(s)):(s.exception=e,n(s))})}():(s.exception=e,n(s))})}function RPsendRequest(e,t,n,s){var o=new XMLHttpRequest;"GET"===e?(o.open(e,magicalData.siteURL+"/wp-json/wp/v2/"+t+n),o.onload=function(){if(200<=o.status&&o.status<400){var e=JSON.parse(o.responseText);s(e)}else s("Connection to the server was succesful, but we recieved an error to our request.")},o.onerror=function(){s("Connection error")},o.send()):"POST"===e&&(o.open(e,magicalData.siteURL+"/wp-json/wp/v2/"+t),o.onload=function(){if(200<=o.status&&o.status<400){var e=JSON.parse(o.responseText);s(e)}else s("Connection to the server was succesful, but we recieved an error to our request.")},o.setRequestHeader("X-WP-Nonce",magicalData.nonce),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.onerror=function(){s("Connection error")},o.send(JSON.stringify(n)))}