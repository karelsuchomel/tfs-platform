for(var yearButtonsElements=document.getElementsByClassName("button-school-year"),i=yearButtonsElements.length-1;0<=i;i--)yearButtonsElements[i].addEventListener("click",execute_request);var galListContainer=document.getElementById("listing-found-galleries-container");function execute_request(e){document.getElementsByClassName("selected")[0].className="button-school-year",e.currentTarget.className+=" selected";var t=e.currentTarget.getAttribute("data"),n=t.substr(0,4),r=t.substr(5),s=new XMLHttpRequest,o="?selected_year_fs="+n;history.replaceState(null,null,o);var a="";a="?categories=8",a+="&after="+(n+="-08-31T00:00:00.000Z"),a+="&before="+(r+="-09-01T00:00:00.000Z"),a+="&_embed",s.open("GET",magicalData.siteURL+"/wp-json/wp/v2/posts"+a),s.onload=function(){200<=s.status&&s.status<400?printResponse(JSON.parse(s.responseText)):console.log("Connection to the server was succesful, but we recieved an error to our request.")},s.onerror=function(){console.log("Connection error")},s.send()}function printResponse(e){HTMLtoprint="";for(var t=0;t<e.length;t++){if(HTMLtoprint+="<li>",HTMLtoprint+="<a href='"+e[t].link+"'>",e[t]._embedded["wp:featuredmedia"])var n=e[t]._embedded["wp:featuredmedia"][0].source_url,r=n.length,s=n.substr(r-4,4),o=n.substr(0,r-4)+"-252x189"+s;else o="";HTMLtoprint+="<img src='"+o+"'>",HTMLtoprint+="</a>",HTMLtoprint+="<div class='title-overlay-container'>",HTMLtoprint+="<a class='title' href='"+e[t].link+"'>",HTMLtoprint+=e[t].title.rendered+"</a>",HTMLtoprint+="<span class='gallery-date'>",HTMLtoprint+=parseIsoDatetime(e[t].date)+"</span>",HTMLtoprint+="</div>",HTMLtoprint+="</li>"}galListContainer.innerHTML=HTMLtoprint}function parseIsoDatetime(e){var t=e.split(/[: T-]/).map(parseFloat);return t[2]+". "+["leden","únor","březen","duben","květen","červen","červenec","srpen","září","říjen","listopad","prosinec"][t[1]-1]+", "+t[0]}